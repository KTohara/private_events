<div class="container mt-5">
  <div class="row">
    <div class="col d-flex justify-content-between align-items-center">
      <div>
        <h1 class="display-6 fw-bold"><%= @event.name.titleize %></h1>
      </div>
      <div class="d-flex gap-1">
        <% if current_user == @event.host %>
          <%= button_to 'Edit Event', edit_event_path, class: "btn btn-primary" %>
          <%= button_to 'Delete Event', event_path, method: :delete, data: { turbo_confirm: "Delete Event?" }, class: "btn btn-primary" %>
        <% elsif current_user && @event.attendees.include?(current_user) %>
          <%= link_to 'Leave Event', unattend_event_path, class: 'btn btn-primary' %>
        <% elsif current_user && @event.attendees.exclude?(current_user) %>
          <%= link_to 'Join Event', attend_event_path, class: 'btn btn-primary' %>
        <% else %>
        <% end %>
      </div>
    </div>
  </div>
  
  <div class="card mb-3">
    <div class="row gap-2">
      <div class="col-md-3">
        <div class="card-body">
          <p class="card-text">
            <i class="bi bi-person-circle me-1"></i>
            <span class="fw-bold">Host:</span>
            <%= link_to @event.host.username, user_path(@event.host) %>
          </p>
          <p class="card-text">
            <i class="bi bi-calendar-heart me-1"></i>
            <span class="fw-bold">Date:</span>
            <span class="text-muted"><%= @event.date %></span>
          </p>
          <p class="card-text">
            <i class="bi bi-geo-alt me-1"></i>
            <span class="fw-bold">Location:</span>
            <span class="text-muted"><%= @event.location.titleize %></span>
          </p>
        </div>
      </div>

      <div class="col-md-7">
        <div class="card-body">
          <p class="card-text mb-1">
            <i class="bi bi-card-text"></i>
            <span class="fw-bold">Event Details:</span>
            <p class="lead"><%= @event.description %></p>
          </p>
        </div>
      </div>
    </div>
  </div>

  <p class="fs-5">Attendees</p>

  <div class="card p-2">
    <div class="list-group">
      <% if @event.attendees.empty? %>
        <p class="card-text text-center text-muted">No one has attended this event yet!</p>
      <% else %>
        <% @event.attendees.each do |attendee| %>
          <span class="list-group-item">
            <i class="bi bi-person-circle me-1"></i>
            <%= link_to attendee.username, user_path(attendee) %>
          </span>
        <% end %>
      <% end %>
    </div>
  </div>
</div>

